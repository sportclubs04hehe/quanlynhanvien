<div class="filter-container card">
  <div class="card-body">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h6 class="mb-0">
        <i class="bi bi-funnel"></i> Bộ Lọc
      </h6>
      <div class="btn-group btn-group-sm">
        @if (hasActiveFilters()) {
          <button 
            type="button" 
            class="btn btn-outline-secondary"
            (click)="onReset()">
            <i class="bi bi-x-circle"></i> Xóa Lọc
          </button>
        }
        <button 
          type="button" 
          class="btn btn-outline-primary"
          (click)="onRefresh()">
          <i class="bi bi-arrow-clockwise"></i> Làm Mới
        </button>
      </div>
    </div>
    
    <div class="row g-3">
      
      <!-- Mã Đơn -->
      <div class="col-md-2">
        <label for="maDon" class="form-label">
          <i class="bi bi-tag"></i> Mã Đơn
        </label>
        <input 
          type="text" 
          class="form-control" 
          id="maDon"
          placeholder="VD: NP-2025-001"
          [(ngModel)]="maDon"
          (ngModelChange)="onSearchChange()">
      </div>

      <!-- Search Term -->
      <div class="col-md-4">
        <label for="searchTerm" class="form-label">
          <i class="bi bi-search"></i> Tìm Kiếm
        </label>
        <input 
          type="text" 
          class="form-control" 
          id="searchTerm"
          placeholder="Tên nhân viên, lý do..."
          [(ngModel)]="searchTerm"
          (ngModelChange)="onSearchChange()">
      </div>
      
      <!-- Loại Đơn -->
      <div class="col-md-3">
        <label for="loaiDon" class="form-label">
          <i class="bi bi-file-earmark-text"></i> Loại Đơn
        </label>
        <select 
          class="form-select" 
          id="loaiDon"
          [(ngModel)]="selectedLoaiDon"
          (ngModelChange)="onFilterChange()">
          <option value="">-- Tất cả --</option>
          @for (option of loaiDonOptions; track option.value) {
            <option [value]="option.value">{{ option.label }}</option>
          }
        </select>
      </div>
      
      <!-- Trạng Thái -->
      <div class="col-md-3">
        <label for="trangThai" class="form-label">
          <i class="bi bi-flag"></i> Trạng Thái
        </label>
        <select 
          class="form-select" 
          id="trangThai"
          [(ngModel)]="selectedTrangThai"
          (ngModelChange)="onFilterChange()">
          <option value="">-- Tất cả --</option>
          @for (option of trangThaiOptions; track option.value) {
            <option [value]="option.value">{{ option.label }}</option>
          }
        </select>
      </div>
      
      <!-- Date Range -->
      <div class="col-md-6">
        <label class="form-label">
          <i class="bi bi-calendar-range"></i> Từ Ngày
        </label>
        <div class="input-group">
          <input 
            class="form-control" 
            placeholder="dd/mm/yyyy"
            name="dpTuNgay"
            [(ngModel)]="tuNgay"
            ngbDatepicker 
            #dTuNgay="ngbDatepicker"
            (ngModelChange)="onFilterChange()">
          <button 
            class="btn btn-outline-secondary" 
            (click)="dTuNgay.toggle()" 
            type="button">
            <i class="bi bi-calendar3"></i>
          </button>
        </div>
      </div>
      
      <div class="col-md-6">
        <label class="form-label">
          <i class="bi bi-calendar-range"></i> Đến Ngày
        </label>
        <div class="input-group">
          <input 
            class="form-control" 
            placeholder="dd/mm/yyyy"
            name="dpDenNgay"
            [(ngModel)]="denNgay"
            ngbDatepicker 
            #dDenNgay="ngbDatepicker"
            (ngModelChange)="onFilterChange()">
          <button 
            class="btn btn-outline-secondary" 
            (click)="dDenNgay.toggle()" 
            type="button">
            <i class="bi bi-calendar3"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
